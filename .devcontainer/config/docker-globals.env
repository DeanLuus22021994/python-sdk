# Global Docker Environment Variables for MCP Python SDK DevContainer
# This file is sourced by all Docker Compose services for consistent configuration
# All variables use GLOBAL_ prefix to avoid conflicts with local service variables

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================
GLOBAL_NETWORK_MTU=9000
GLOBAL_NETWORK_SUBNET=172.20.0.0/16
GLOBAL_NETWORK_GATEWAY=172.20.0.1

# =============================================================================
# PYTHON OPTIMIZATION
# =============================================================================
GLOBAL_PYTHONOPTIMIZE=2
GLOBAL_PYTHONUNBUFFERED=1
GLOBAL_PYTHONDONTWRITEBYTECODE=1
GLOBAL_PYTHONHASHSEED=0
GLOBAL_PYTHONSTARTUP=/workspaces/python-sdk/.devcontainer/config/python-startup.py
GLOBAL_PYTHONPATH=/workspaces/python-sdk/src

# =============================================================================
# PERFORMANCE SETTINGS
# =============================================================================
GLOBAL_MALLOC_CONF=dirty_decay_ms:1000,muzzy_decay_ms:1000
GLOBAL_LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libjemalloc.so.2

# =============================================================================
# GPU CONFIGURATION
# =============================================================================
GLOBAL_NVIDIA_VISIBLE_DEVICES=all
GLOBAL_NVIDIA_DRIVER_CAPABILITIES=all
GLOBAL_CUDA_VISIBLE_DEVICES=all

# =============================================================================
# CACHE DIRECTORIES
# =============================================================================
GLOBAL_CACHE_ROOT=/opt/mcp-cache
GLOBAL_NUMBA_CACHE_DIR=/opt/mcp-cache/numba
GLOBAL_PYTHON_CACHE_SIZE=8G
GLOBAL_WHEELS_CACHE_SIZE=4G
GLOBAL_BYTECODE_CACHE_SIZE=2G
GLOBAL_NUMBA_CACHE_SIZE=4G

# =============================================================================
# RESOURCE LIMITS
# =============================================================================
GLOBAL_TMPFS_SIZE=32G
GLOBAL_CONTAINER_SHM_SIZE=16G
GLOBAL_CPU_LIMIT=0
GLOBAL_MEMORY_LIMIT=0
GLOBAL_CPU_RESERVATION=4
GLOBAL_MEMORY_RESERVATION=8G

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
GLOBAL_POSTGRES_USER=postgres
GLOBAL_POSTGRES_DB=postgres
GLOBAL_POSTGRES_PASSWORD=postgres
GLOBAL_POSTGRES_PORT=5432
GLOBAL_POSTGRES_DATA_PATH=/opt/postgres-data

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
GLOBAL_REDIS_PORT=6379
GLOBAL_REDIS_MAXMEMORY=4gb

# =============================================================================
# BUILD CONFIGURATION
# =============================================================================
GLOBAL_BUILDKIT_INLINE_CACHE=1
GLOBAL_DOCKER_BUILDKIT=1

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
GLOBAL_PRIVILEGED_MODE=true
GLOBAL_SECURITY_OPT=seccomp:unconfined
GLOBAL_APPARMOR_PROFILE=apparmor:unconfined

# =============================================================================
# SYSTEM OPTIMIZATION
# =============================================================================
GLOBAL_ULIMIT_MEMLOCK_SOFT=-1
GLOBAL_ULIMIT_MEMLOCK_HARD=-1
GLOBAL_ULIMIT_STACK_SOFT=67108864
GLOBAL_ULIMIT_STACK_HARD=67108864
GLOBAL_ULIMIT_NOFILE_SOFT=1048576
GLOBAL_ULIMIT_NOFILE_HARD=1048576

# =============================================================================
# SYSCTLS FOR PERFORMANCE
# =============================================================================
GLOBAL_SYSCTL_SOMAXCONN=32768
GLOBAL_SYSCTL_TCP_MAX_SYN_BACKLOG=32768
GLOBAL_SYSCTL_NETDEV_MAX_BACKLOG=32768
GLOBAL_SYSCTL_VM_SWAPPINESS=1
GLOBAL_SYSCTL_VM_DIRTY_RATIO=80
GLOBAL_SYSCTL_VM_DIRTY_BACKGROUND_RATIO=5
GLOBAL_SYSCTL_VM_VFS_CACHE_PRESSURE=50
